kind: pipeline
type: docker
name: sync-tifinity-io


steps:
- name: hugo build
  image: alpine
  commands:
  - echo hello drone
  - yum install git
  - git version
  - git config --global http.version HTTP/1.1
  - git submodule update --init --recursive
  - ls && pwd
  - yum install hugo
  - hugo --baseUrl="http://tifinity.github.io/"
  - cd public
  - git add .
  - git commit -m "update blog"
  - git remote set-url origin git@github.com:Tifinity/Tifinity.github.io.git
  - git push origin HEAD:master
  when:
    branch:
    - master

trigger:
  event:
  - push